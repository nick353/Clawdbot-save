# Bitget自動トレーディングシステム

andoさんのSMA/EMA 200反発戦略をBitgetで自動実行するシステム

---

## 🚀 セットアップ

### 1. Bitget APIキー取得

1. Bitgetにログイン
2. [API管理](https://www.bitget.com/ja/api-doc/spot/intro)ページへ
3. 新しいAPIキーを作成
4. 権限設定:
   - ✅ 読み取り
   - ✅ 取引（リアルトレード時のみ）
   - ❌ 出金（不要）
5. IPホワイトリスト設定（推奨）
6. APIキー、シークレットキー、パスフレーズをコピー

### 2. 環境変数設定

```bash
# ~/.profile に追加
export BITGET_API_KEY="your_api_key_here"
export BITGET_SECRET_KEY="your_secret_key_here"
export BITGET_PASSPHRASE="your_passphrase_here"
```

```bash
# 設定を反映
source ~/.profile
```

### 3. 設定ファイル編集

`/root/clawd/config/bitget-trading.json` を編集：

```json
{
  "paper_trade": true,  // ペーパートレードモード（最初はtrue推奨）
  "initial_capital": 10000.0,  // ペーパートレード用初期資金
  "discord_channel": "1464650064357232948",  // Discord通知チャンネルID
  "symbols": [
    "MANAUSDT",  // 監視する銘柄（バックテストで優秀だった銘柄）
    "AXSUSDT",
    "FETUSDT"
  ],
  "strategy": {
    "sma_period": 200,  // SMA期間
    "ema_period": 200,  // EMA期間
    "volatility_threshold": 10.0,  // 前日比±10%
    "proximity_pct": 2.0,  // SMA/EMA接近±2%
    "stop_loss_pct": 5.0,  // ストップロス-5%
    "take_profit_pct": 10.0,  // 利益確定+10%
    "position_size_pct": 10.0  // ポジションサイズ10%
  },
  "risk_management": {
    "max_daily_loss": -100.0,  // 1日最大損失$100
    "max_daily_trades": 20,  // 1日最大20トレード
    "max_positions": 3  // 同時3ポジションまで
  },
  "timeframe": "5m",  // 5分足監視
  "check_interval": 60  // 60秒ごとにチェック
}
```

---

## 📊 使い方

### ペーパートレードモード（テスト）

```bash
cd /root/clawd
python3 scripts/bitget-trader.py
```

**出力例:**
```
🐥 Bitgetトレーダー初期化
📊 モード: ペーパートレード
💰 初期資金: $10,000.00

================================================================================
🚀 Bitget自動トレーディング開始
================================================================================

📊 監視銘柄: MANAUSDT, AXSUSDT, FETUSDT
⏰ 時間足: 5m
🔄 チェック間隔: 60秒

💰 口座残高: $10,000.00

================================================================================
🔄 チェック #1 - 2026-02-12 06:15:00
================================================================================

📊 MANAUSDT チェック中...
⏳ MANAUSDT: 条件未達

📊 AXSUSDT チェック中...
🎯 AXSUSDT: エントリー条件一致！価格: $5.6234

📊 FETUSDT チェック中...
⏳ FETUSDT: 条件未達

⏱️  次のチェックまで60秒待機...
```

### リアルトレードモード（本番）

⚠️ **注意**: 実際のお金が動きます！十分にテストしてから使用してください。

1. 設定ファイルで `"paper_trade": false` に変更
2. 実行:

```bash
cd /root/clawd
python3 scripts/bitget-trader.py
```

---

## 📋 パラメータ調整ガイド

### 戦略パラメータ

| パラメータ | 説明 | 推奨値 | 調整のヒント |
|-----------|------|--------|-------------|
| `sma_period` | SMA期間 | 200 | 短く（50-100）すると反応が早い |
| `ema_period` | EMA期間 | 200 | 短く（50-100）すると反応が早い |
| `volatility_threshold` | ボラティリティ閾値 | 10.0 | 小さく（5.0）するとエントリー機会増加 |
| `proximity_pct` | SMA/EMA接近判定 | 2.0 | 大きく（3.0-5.0）するとエントリー機会増加 |
| `stop_loss_pct` | ストップロス | 5.0 | 小さく（3.0）すると損失小、大きく（7.0）すると余裕 |
| `take_profit_pct` | 利益確定 | 10.0 | 小さく（5.0）すると早期利確、大きく（15.0）で大きな利益狙い |
| `position_size_pct` | ポジションサイズ | 10.0 | 小さく（5.0）でリスク低、大きく（20.0）でリターン大 |

### リスク管理パラメータ

| パラメータ | 説明 | 推奨値 | 調整のヒント |
|-----------|------|--------|-------------|
| `max_daily_loss` | 1日最大損失 | -100.0 | 総資金の1-2%が安全 |
| `max_daily_trades` | 1日最大トレード数 | 20 | 過剰取引防止 |
| `max_positions` | 同時保有ポジション | 3 | 分散投資のバランス |

### 時間足とチェック間隔

| 時間足 | チェック間隔 | 特徴 |
|--------|-------------|------|
| `5m` | 60秒 | 高頻度、スキャルピング |
| `15m` | 180秒 | 中頻度、デイトレード |
| `1h` | 600秒 | 低頻度、スイングトレード |
| `4h` | 1800秒 | 超低頻度、ポジショントレード |

---

## 🔔 Discord通知

### 通知イベント

- ✅ トレーディング開始/停止
- ✅ エントリー条件一致
- ✅ ポジションオープン
- ✅ ポジションクローズ
- ✅ 損益レポート
- ⚠️ リスク管理アラート（最大損失到達など）

### 専用チャンネル作成（推奨）

1. Discordで新しいチャンネル作成（例: `#bitget-trading`）
2. チャンネルIDを取得:
   - チャンネル右クリック → IDをコピー
3. 設定ファイルの `discord_channel` に貼り付け

---

## 🛡️ 安全機能

### 1. ペーパートレードモード
- 実際の取引なし
- 戦略テストに最適

### 2. リスク管理
- 1日の最大損失制限
- 最大トレード数制限
- 同時保有ポジション数制限

### 3. 緊急停止
- `Ctrl+C` でいつでも停止可能

### 4. エラーハンドリング
- API接続エラー時は自動リトライ
- 重大なエラー時は安全に停止

---

## 📈 監視と最適化

### 1. パフォーマンス監視

```bash
# ログファイル確認
tail -f /root/clawd/logs/bitget-trader.log
```

### 2. パラメータ最適化

バックテストで優秀だった設定:
- **MANA**: 高リターン、高シャープ比
- **AXS**: 高勝率、多トレード機会
- **FET**: 高シャープ比

### 3. 定期的な見直し

- 毎週: 損益レポート確認
- 毎月: パラメータ調整
- 四半期: 戦略全体の見直し

---

## ⚠️ 注意事項

1. **最初は必ずペーパートレードでテスト**
2. **少額から始める**（リアルトレード時）
3. **市場の急変動に注意**
4. **過去の成績は将来の保証ではない**
5. **自己責任で運用**

---

## 🐥 サポート

問題があれば、Discordの #一般 で相談してくださいっぴ！
